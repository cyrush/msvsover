environment:
  matrix:
  - CMAKE_GENERATOR: "Visual Studio 14 2015 Win64"

# scripts that are called at very beginning, before repo cloning
init:
  - git config --global core.autocrlf input

# scripts to run before build
before_build:
  - del "C:\Program Files (x86)\MSBuild\14.0\Microsoft.Common.targets\ImportAfter\Xamarin.Common.targets"
  - echo Running cmake ...
  - cmake -H. -Bbuild -G "%CMAKE_GENERATOR%"

build_script:
  - echo Building ...
  - cmake --build build --config "%CONFIGURATION%"

after_build:
  - ps: cd build
  - ctest -VV

artifacts:
  - path: build/msvsover
